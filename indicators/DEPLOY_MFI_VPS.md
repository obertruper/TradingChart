# –î–µ–ø–ª–æ–π –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ MFI Loader –Ω–∞ VPS

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

**–í–µ—Ä—Å–∏—è 2 (—Å—Ç–∞–±–∏–ª—å–Ω–∞—è):**
- ‚úÖ **Float64 conversion** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω TypeError –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å PostgreSQL Decimal —Ç–∏–ø–∞–º–∏
- ‚úÖ **Incomplete candle exclusion** - –ø–æ—Å–ª–µ–¥–Ω—è—è –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω–∞—è —Å–≤–µ—á–∞ –∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è –∏–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ **UPSERT pattern** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—É—Å–∫–∞—Ö
- ‚úÖ **100% –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å** - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–º –Ω–∞ 204,328 —Å—Ä–∞–≤–Ω–µ–Ω–∏–π

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å (–Ω–µ –±–∞–≥):**
- ‚ö†Ô∏è **Data race condition** - loader –º–æ–∂–µ—Ç —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–æ –ø—Ä–∏–±—ã—Ç–∏—è –≤—Å–µ—Ö 1m —Å–≤–µ—á–µ–π
- ‚úÖ **–ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - UPSERT –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ
- ‚úÖ **–†–µ—à–µ–Ω–∏–µ** - —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –∑–∞–ø—É—Å–∫–∏ —á–µ—Ä–µ–∑ cron (–∫–∞–∂–¥—ã–π —á–∞—Å)

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é

### 1. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –Ω–∞ VPS

```bash
# –° –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã (–∑–∞–º–µ–Ω–∏—Ç–µ –ø—É—Ç–∏ –Ω–∞ –≤–∞—à–∏)
scp mfi_loader.py user@vps_ip:/path/to/TradingChart/indicators/
```

### 2. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –Ω–∞ VPS

```bash
ssh user@vps_ip
cd /path/to/TradingChart/indicators

# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
python3 mfi_loader.py --symbol ETHUSDT --timeframe 1h --batch-days 3
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
```
üìÖ –ü–æ—Å–ª–µ–¥–Ω—è—è –¥–∞—Ç–∞ MFI: 2025-11-12 08:00:00+00:00
‚ñ∂Ô∏è  –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å: 2025-11-12 09:00:00+00:00
‚è∏Ô∏è  –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ end_date –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –ó–ê–í–ï–†–®–ï–ù–ù–û–ô —Å–≤–µ—á–∏: 2025-11-12 10:00:00+00:00
   (–∏—Å–∫–ª—é—á–µ–Ω–∞ –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω–∞—è —Å–≤–µ—á–∞ 2025-11-12 11:17:00+00:00)
‚úÖ ETHUSDT –∑–∞–≤–µ—Ä—à–µ–Ω
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```bash
# –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏ (–±—ã—Å—Ç—Ä–∞—è - –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π)
python3 tests/check_full_data/check_mfi_data.py --symbol ETHUSDT --timeframe 1h --days 7

# –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏ (–ø–æ–ª–Ω–∞—è - –≤—Å—è –∏—Å—Ç–æ—Ä–∏—è)
python3 tests/check_full_data/check_mfi_data.py --symbol ETHUSDT --timeframe 1h
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Total comparisons: 204,328
Total errors: 0
Overall accuracy: 100.0000%
‚úÖ All MFI values are mathematically correct!
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–í–ê–ñ–ù–û!)

**–ü–æ—á–µ–º—É –Ω—É–∂–µ–Ω cron:**
- Monitor –∑–∞–≥—Ä—É–∂–∞–µ—Ç 1m —Å–≤–µ—á–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π (1-2 –º–∏–Ω—É—Ç—ã - –Ω–æ—Ä–º–∞–ª—å–Ω–æ)
- Loader –º–æ–∂–µ—Ç –æ–±–æ–≥–Ω–∞—Ç—å –ø—Ä–∏–±—ã—Ç–∏–µ –¥–∞–Ω–Ω—ã—Ö ‚Üí –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç–∏
- –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –∑–∞–ø—É—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è—é—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ UPSERT

**–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ crontab:**

```bash
crontab -e
```

–î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫–∏:

```bash
# MFI Loader - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–π —á–∞—Å (1h —Ç–∞–π–º—Ñ—Ä–µ–π–º)
5 * * * * cd /path/to/TradingChart/indicators && python3 mfi_loader.py --timeframe 1h >> logs/mfi_cron_1h.log 2>&1

# MFI Loader - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç (15m —Ç–∞–π–º—Ñ—Ä–µ–π–º)
*/15 * * * * cd /path/to/TradingChart/indicators && python3 mfi_loader.py --timeframe 15m >> logs/mfi_cron_15m.log 2>&1
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ó–∞–ø—É—Å–∫ –Ω–∞ 5-–π –º–∏–Ω—É—Ç–µ —á–∞—Å–∞ (`:05`) –¥–∞–µ—Ç –≤—Ä–µ–º—è monitor'—É –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ 60 —Å–≤–µ—á–µ–π –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —á–∞—Å–∞.

### 5. –ü–æ–ª–Ω—ã–π –¥–µ–ø–ª–æ–π –¥–ª—è –≤—Å–µ—Ö —Å–∏–º–≤–æ–ª–æ–≤

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:

```bash
# –ó–∞–ø—É—Å–∫ –¥–ª—è –≤—Å–µ—Ö —Å–∏–º–≤–æ–ª–æ–≤ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
python3 mfi_loader.py --timeframe 1h
python3 mfi_loader.py --timeframe 15m
```

## –ü–æ–Ω–∏–º–∞–Ω–∏–µ Data Race Condition

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

```
10:00 - Loader –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
10:00 - –ß–∞—Å 09:00-10:00 —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ 40/60 —Å–≤–µ—á–µ–π
10:00 - Loader —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç MFI –Ω–∞ 40 —Å–≤–µ—á–∞—Ö ‚Üí –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
10:00 - –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ –ë–î —á–µ—Ä–µ–∑ UPSERT
10:05 - –ü—Ä–∏—Ö–æ–¥—è—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ 20 —Å–≤–µ—á–µ–π –æ—Ç monitor
11:05 - Loader –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–Ω–æ–≤–∞ (cron)
11:05 - –í–∏–¥–∏—Ç —á—Ç–æ 09:00-10:00 —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω—ã–π (60/60)
11:05 - –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç MFI ‚Üí –ü–†–ê–í–ò–õ–¨–ù–û
11:05 - –ü–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ –ë–î —á–µ—Ä–µ–∑ UPSERT ‚Üí ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
```

### –ü–æ—á–µ–º—É UPSERT –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

```sql
INSERT INTO indicators_bybit_futures_1h (timestamp, symbol, mfi_7, ...)
VALUES ('2025-11-12 09:00:00', 'ETHUSDT', 82.26, ...)
ON CONFLICT (timestamp, symbol)
DO UPDATE SET
    mfi_7 = EXCLUDED.mfi_7,  -- –ü–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º
    ...
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ?

**–î–ê, –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏ cron:**
- Loader –º–æ–∂–µ—Ç –æ–±–æ–≥–Ω–∞—Ç—å –ø—Ä–∏–±—ã—Ç–∏–µ –¥–∞–Ω–Ω—ã—Ö
- Validator –ø–æ–∫–∞–∂–µ—Ç 99.99% accuracy (1-2 –æ—à–∏–±–∫–∏ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö timestamp)
- –≠—Ç–æ **–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**, –∏—Å–ø—Ä–∞–≤–∏—Ç—Å—è –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ

**–ù–ï–¢, –ø–æ—Å–ª–µ 2-—Ö –∑–∞–ø—É—Å–∫–æ–≤:**
- –ï—Å–ª–∏ –æ—à–∏–±–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è –ø–æ—Å–ª–µ 2-—Ö —á–∞—Å–æ–≤ ‚Üí –ø—Ä–æ–±–ª–µ–º–∞
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ monitor —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç 1m —Å–≤–µ—á–∏

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–°–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏:** ~14 –±–∞—Ç—á–µ–π/—Å–µ–∫ (1h —Ç–∞–π–º—Ñ—Ä–µ–π–º)
- **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å –ø–æ—Å–ª–µ–¥–Ω–µ–π –¥–∞—Ç—ã
- **UPSERT overhead:** –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π (–∏–Ω–¥–µ–∫—Å –Ω–∞ primary key)

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### 1. Float64 Conversion Fix

**–ü—Ä–æ–±–ª–µ–º–∞:** PostgreSQL –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Decimal —Ç–∏–ø—ã, –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Å numpy

**–†–µ—à–µ–Ω–∏–µ:**
```python
high = df['high'].astype(np.float64)
low = df['low'].astype(np.float64)
close = df['close'].astype(np.float64)
volume = df['volume'].astype(np.float64)
```

### 2. Incomplete Candle Exclusion

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ–¥–Ω—è—è —Å–≤–µ—á–∞ –µ—â–µ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è (–Ω–µ–ø–æ–ª–Ω–∞—è)

**–†–µ—à–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—á–∏—Ç–∞–µ—Ç 1 –ø–µ—Ä–∏–æ–¥ –æ—Ç end_date
- **1m**: -1 –º–∏–Ω—É—Ç–∞
- **15m**: -15 –º–∏–Ω—É—Ç
- **1h**: -1 —á–∞—Å

```python
if self.timeframe == '1h':
    end_date = end_date.replace(minute=0, second=0, microsecond=0)
    end_date = end_date - timedelta(hours=1)
```

### 3. UPSERT Pattern

**SQL –∞–≥—Ä–µ–≥–∞—Ü–∏—è** (–±—ã—Å—Ç—Ä–æ, –≤ PostgreSQL):
```sql
SELECT
    date_trunc('hour', timestamp) +
    INTERVAL '60 minutes' * (EXTRACT(MINUTE FROM timestamp)::INTEGER / 60) as timestamp,
    MAX(high), MIN(low), (array_agg(close ORDER BY timestamp DESC))[1], SUM(volume)
FROM candles_bybit_futures_1m
GROUP BY date_trunc('hour', timestamp) + ...
```

**UPSERT –∑–∞–ø–∏—Å—å** (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ):
```sql
INSERT INTO indicators_bybit_futures_1h (timestamp, symbol, mfi_7, ...)
VALUES (%s, %s, %s, ...)
ON CONFLICT (timestamp, symbol) DO UPDATE SET mfi_7 = EXCLUDED.mfi_7, ...
```

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: Validation –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 1-2 –æ—à–∏–±–∫–∏ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö timestamp

**–ü—Ä–∏—á–∏–Ω–∞:** Data race - loader –æ–±–æ–≥–Ω–∞–ª –ø—Ä–∏–±—ã—Ç–∏–µ –¥–∞–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–¥–æ–∂–¥–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–≥–æ –∑–∞–ø—É—Å–∫–∞ cron (—á–µ—Ä–µ–∑ —á–∞—Å), –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é
python3 mfi_loader.py --symbol ETHUSDT --timeframe 1h --batch-days 1

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–Ω–æ–≤–∞
python3 tests/check_full_data/check_mfi_data.py --symbol ETHUSDT --timeframe 1h --days 1
```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ –ù–ï –∏—Å–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ 2-—Ö –∑–∞–ø—É—Å–∫–æ–≤

**–ü—Ä–∏—á–∏–Ω–∞:** Monitor –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç 1m —Å–≤–µ—á–∏ –∏–ª–∏ –ø—Ä–æ–ø—É—Å–∫–∏ –≤ –¥–∞–Ω–Ω—ã—Ö

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ 1m —Å–≤–µ—á–µ–π –¥–ª—è –ø—Ä–æ–±–ª–µ–º–Ω–æ–≥–æ —á–∞—Å–∞
SELECT COUNT(*)
FROM candles_bybit_futures_1m
WHERE symbol = 'ETHUSDT'
    AND timestamp >= '2025-11-12 09:00:00'
    AND timestamp < '2025-11-12 10:00:00';
```

–ï—Å–ª–∏ < 60 —Å–≤–µ—á–µ–π ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –≤ monitor, –Ω–µ –≤ loader.

### –ü—Ä–æ–±–ª–µ–º–∞: TypeError –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ MFI

**–ü—Ä–∏—á–∏–Ω–∞:** –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –±–µ–∑ float64 conversion

**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω –≤ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ (—Å—Ç—Ä–æ–∫–∏ 242-247)

### –ü—Ä–æ–±–ª–µ–º–∞: –í –ë–î –ø–æ–ø–∞–¥–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —Å–≤–µ—á–µ–π

**–ü—Ä–∏—á–∏–Ω–∞:** –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –±–µ–∑ incomplete candle exclusion

**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω –≤ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ (—Å—Ç—Ä–æ–∫–∏ 194-208)

### –ü—Ä–æ–±–ª–µ–º–∞: –ù—É–∂–µ–Ω –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Å—á–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# --force-reload –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç –í–°–Æ –∏—Å—Ç–æ—Ä–∏—é —Å –Ω–∞—á–∞–ª–∞
python3 mfi_loader.py --symbol ETHUSDT --timeframe 1h --force-reload --batch-days 3
```

‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –ø—Ä–∏:
- –ò–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–æ—Ä–º—É–ª—ã —Ä–∞—Å—á–µ—Ç–∞ MFI
- –ú–∞—Å—Å–æ–≤—ã—Ö –æ—à–∏–±–∫–∞—Ö –ø–æ –≤—Å–µ–π –∏—Å—Ç–æ—Ä–∏–∏
- –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã cron:

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ 1h
tail -f logs/mfi_cron_1h.log

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ 15m
tail -f logs/mfi_cron_15m.log
```

### –†–µ–≥—É–ª—è—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

–î–æ–±–∞–≤–∏—Ç—å –≤ crontab –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–∞–∑ –≤ –¥–µ–Ω—å:

```bash
# –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è (06:00 UTC)
0 6 * * * cd /path/to/TradingChart/indicators && python3 tests/check_full_data/check_mfi_data.py --symbol ETHUSDT --timeframe 1h --days 7 >> logs/mfi_validation.log 2>&1
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

‚úÖ **MFI Loader v2** - —Å—Ç–∞–±–∏–ª—å–Ω–∞—è, production-ready –≤–µ—Ä—Å–∏—è:
- Float64 fix –¥–ª—è PostgreSQL Decimal
- Incomplete candle exclusion
- UPSERT –∞–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- 100% mathematical accuracy

‚ö†Ô∏è **Data race condition** - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å real-time —Å–∏—Å—Ç–µ–º:
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏ - –Ω–æ—Ä–º–∞–ª—å–Ω–æ
- UPSERT –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ
- Cron –∫–∞–∂–¥—ã–π —á–∞—Å –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

üöÄ **–ì–æ—Ç–æ–≤–æ –∫ production deployment!**
